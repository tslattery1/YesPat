{"version":3,"sources":["../../src/pages/bussiness-add-menu/bussiness-add-menu.module.ts","../../src/pages/bussiness-add-menu/bussiness-add-menu.ts"],"names":[],"mappings":"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","file":"16.main.js","sourcesContent":["//home.module.ts\nimport { NgModule } from '@angular/core';\nimport { BussinessAddMenuPage } from './bussiness-add-menu';\nimport { IonicPageModule } from 'ionic-angular';\n\n@NgModule({\n  declarations: [BussinessAddMenuPage],\n  imports: [IonicPageModule.forChild(BussinessAddMenuPage)],\n})\nexport class BussinessAddMenuPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/bussiness-add-menu/bussiness-add-menu.module.ts","import { Component } from '@angular/core';\nimport { IonicPage } from 'ionic-angular';\nimport { Http, Headers } from '@angular/http';\nimport { NgxQRCodeModule } from 'ngx-qrcode2';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\nimport { NavController, ModalController } from \"ionic-angular\";\nimport { AngularFireDatabase, FirebaseListObservable } from \"angularfire2/database\";\nimport { Storage } from \"@ionic/storage\";\nimport { AlertController } from 'ionic-angular';\nimport { Observable } from \"rxjs\";\nimport firebase from 'firebase';\n\n@IonicPage()\n@Component({\n  selector: 'bussiness-add-menu',\n  templateUrl: 'bussiness-add-menu.html',\n})\n\nexport class BussinessAddMenuPage {\n\n  menuItem: any = [];\n  user: any;\n  userData: any;\n  slideData: any;\n  userDataLoaded: any = true;\n\n  constructor(private http: Http, public alertCtrl: AlertController, private barcodeScanner: BarcodeScanner, private navCtrl: NavController, private af: AngularFireDatabase, private storage: Storage, public modalCtrl: ModalController) {\n\n  }\n\n  public ngOnInit() {\n    if (!this.user && this.userDataLoaded) {\n      this.storage.get('uid').then((response) => {\n        this.user = this.af.object('/businessProfile/' + response);\n        this.user.subscribe((data) => {\n          console.log('Business USER DATA', data);\n          this.userDataLoaded = false;\n          this.userData = data;\n          this.slideData = data.bussinessImages;\n          if (this.userData.menuList) {\n            this.menuItem = this.userData.menuList;\n          }\n\n          // Check the user subscription status\n          let userData = firebase.database().ref('/userProfile/');\n          userData.child(response).once(\"value\", (snapshot) => {\n            if (snapshot.val().subscription == false) {\n              this.navCtrl.setRoot('SubscriptionPage', { subscriptionType: 'business', uid: response });\n            } else {\n              this.prepareRequest('http://yaspat.deapps.io:3002/users/get_agreement', `agreement_id=${snapshot.val().subscription}`, 'post').subscribe((data) => {\n                let agreementDetails = JSON.parse(data._body);\n                console.log('Agreement Details', agreementDetails);\n                if (agreementDetails.state !== 'Active') {\n                  this.navCtrl.setRoot('SubscriptionPage', { subscriptionType: 'business', uid: response });\n                } else {\n                  console.log('Jarvis look every thing fine Business Page');\n                }\n              });\n            }\n          });\n        });\n      }, (error) => {\n        console.log('something went wrong', error);\n      });\n    }\n  }\n\n  prepareRequest(url, body, method) {\n    let options: any = {\n      url: url,\n      method: method,\n      headers: this.prepareHeaders(),\n      body: body\n    }\n\n    return this.http.request(url, options)\n      .map((res) => this.prepareData(res)).catch((error) => this.handleError(error));\n  }\n\n  private handleError(err: any) {\n    // console.log('handleError',err)\n    if (err) {\n      console.log('ERROR', err);\n\n      // Handled for cases where might be Api not able to response error message\n    }\n    return Observable.throw(2, err);\n  }\n\n  private prepareData(res: any) {\n    return res;\n  }\n\n  prepareHeaders() {\n    let headers = new Headers();\n    headers.append('Content-Type', 'application/x-www-form-urlencoded');\n    return headers;\n  }\n\n  openUserBarcode() {\n    this.navCtrl.push('QrCodePage');\n  }\n\n  scanQrCode() {\n    this.barcodeScanner.scan().then((barcodeData) => {\n      console.log('User Data ==> ', barcodeData);\n      // Success! Barcode data is here\n    }, (err) => {\n      // An error occurred\n    });\n  }\n\n  addMenuItem() {\n    var opts = {\n      cssClass: 'addItem'\n    }\n    let profileModal = this.modalCtrl.create('AdditemPage', '', opts);\n\n    profileModal.onDidDismiss((data) => {\n      if (data) {\n        data['recent'] = true;\n        this.menuItem.unshift(data);\n      }\n    });\n\n    profileModal.present();\n  }\n\n  publishMenuItem() {\n    console.log('Publish menu item');\n    this.menuItem.forEach((element, index) => {\n      this.menuItem[index].recent = false;\n      if (this.menuItem[index].disable == true) {\n        this.menuItem.splice(index, 1);\n      }\n    });\n    let menuData = { menuList: this.menuItem };\n    this.storage.get('uid').then((response) => {\n      this.af.object('/businessProfile/' + response).update(menuData);\n    })\n  }\n\n  deleteMenuItem(index, item) {\n    console.log('Delete with index', index, item);\n    let confirm = this.alertCtrl.create({\n      title: 'Delete item - ' + item.itemName + ' ??',\n      message: 'Are you sure you want to delete this item?',\n      buttons: [\n        {\n          text: 'No',\n          handler: () => {\n            console.log('Disagree clicked');\n          }\n        },\n        {\n          text: 'Yes',\n          handler: () => {\n            item['disable'] = true;\n            this.menuItem[index] = item;\n            console.log('asdasd', this.menuItem);\n            console.log('Agree clicked');\n          }\n        }\n      ]\n    });\n    confirm.present();\n    // this.menuItem.splice(index, 1);\n  }\n\n  revertMenuItem(index, item) {\n    console.log(item);\n    item['disable'] = false;\n    this.menuItem[index] = item;\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/bussiness-add-menu/bussiness-add-menu.ts"],"sourceRoot":""}