{"version":3,"sources":["../../src/pages/profile-details/edit-profile/edit-profile.module.ts","../../src/pages/profile-details/edit-profile/edit-profile.ts"],"names":[],"mappings":"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","file":"7.main.js","sourcesContent":["//home.module.ts\nimport { NgModule } from '@angular/core';\nimport { EditProfilePage} from './edit-profile';\nimport { IonicPageModule } from 'ionic-angular';\n\n@NgModule({\n  declarations: [EditProfilePage],\n  imports: [IonicPageModule.forChild(EditProfilePage)],\n})\nexport class EditProfilePageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile-details/edit-profile/edit-profile.module.ts","\r\nimport { Component } from '@angular/core';\r\n\r\nimport { Storage } from \"@ionic/storage\";\r\nimport { NavController } from \"ionic-angular\";\r\nimport { IonicPage } from 'ionic-angular';\r\nimport { FirebaseListObservable, AngularFireDatabase } from \"angularfire2/database\";\r\nimport { Auth } from \"../../../providers/auth/auth\";\r\nimport { ImageProvider } from \"../../../providers/image-provider\";\r\nimport { Camera, CameraOptions } from \"@ionic-native/camera\";\r\n\r\nimport { Geolocation } from '@ionic-native/geolocation';\r\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\r\n\r\ndeclare var google: any;\r\n\r\n\r\n@IonicPage()\r\n@Component({\r\n  selector: 'page-edit-profile',\r\n  templateUrl: 'edit-profile.html',\r\n})\r\nexport class EditProfilePage {\r\n  uid: any;\r\n  editprofilePage = EditProfilePage;\r\n  userDetails: any;\r\n  username: string;\r\n  showUserDetails: boolean = false;\r\n  user: FirebaseListObservable<any>;\r\n  geocoder: any;\r\n  editForm: FormGroup;\r\n\r\n  autocompleteItems: any;\r\n  dontShowPredictions: any = true;\r\n  acService: any;\r\n  location: any;\r\n  finalSearchValue: any;\r\n\r\n  constructor(\r\n    public geolocation: Geolocation,\r\n    private storage: Storage,\r\n    private navCtrl: NavController,\r\n    private af: AngularFireDatabase,\r\n    private auth: Auth,\r\n    private imageSrv: ImageProvider,\r\n    private camera: Camera,\r\n  ) {\r\n\r\n    this.editForm = new FormGroup({\r\n      name: new FormControl('', [Validators.required, Validators.pattern(\"[a-zA-Z][a-zA-Z ]+\")]),\r\n      phoneNumber: new FormControl('', [Validators.required, Validators.pattern(\"[0-9]{10,10}\")]),\r\n      address: new FormControl(''),\r\n    });\r\n\r\n\r\n      this.storage.get('uid').then((response) => {\r\n      this.uid = response;\r\n      this.af.object('/userProfile/' + response)\r\n      .subscribe((data) => {\r\n        this.userDetails = data;\r\n        console.log('userDetails', data);\r\n      })\r\n    })\r\n\r\n  }\r\n\r\n  public ngOnInit() {\r\n\r\n    this.acService = new google.maps.places.AutocompleteService();\r\n    this.autocompleteItems = [];\r\n\r\n    this.geolocation.getCurrentPosition({ timeout: 30000, enableHighAccuracy: true }).then((resp) => {\r\n      let latLng = new google.maps.LatLng(resp.coords.latitude, resp.coords.longitude);\r\n      this.getMapDetails(latLng).then( (data: any) => {\r\n          if(!this.userDetails.address) {\r\n            this.userDetails.address = data;\r\n          }\r\n         }).catch((e) => {\r\n           console.log('sorry Jarvis cant mapp anything');\r\n         });\r\n       }).catch((error) => {\r\n      console.log('Error getting location', error);\r\n    });\r\n  }\r\n\r\n  getMapDetails(latLng) {\r\n    return new Promise((resolve, reject) => {\r\n       this.geocoder = new google.maps.Geocoder();\r\n       let mapRespone: any = {};\r\n    \r\n       this.geocoder.geocode({'latLng': latLng}, function(results, status) {\r\n          if (status == google.maps.GeocoderStatus.OK) {\r\n            // console.log('Map Result', results)\r\n            if (results[1]) {\r\n                  console.log('Address', results[0].formatted_address);\r\n                  resolve(results[0].formatted_address);\r\n    \r\n          } else {\r\n              reject('No results found');\r\n            }\r\n          } else {\r\n            reject(status);\r\n          }\r\n        });\r\n        });\r\n      }\r\n\r\n  onSubmit(form) {\r\n    this.storage.get('uid').then((response) => {\r\n      console.log(form.value);\r\n      this.af.object('/userProfile/' + response).update(form.value);\r\n      this.navCtrl.setRoot('ProfileDetailsPage');\r\n    })\r\n  }\r\n\r\n  updateSearch() {\r\n    console.log('Update me', this.finalSearchValue, this.userDetails.address);\r\n    // console.log('modal > updateSearch');\r\n    if (this.userDetails.address == '' || this.userDetails.address === this.finalSearchValue) {\r\n      this.autocompleteItems = [];\r\n      return;\r\n    }\r\n    let self = this;\r\n    let config = {\r\n      //types:  ['geocode'], // other types available in the API: 'establishment', 'regions', and 'cities'\r\n      input: this.userDetails.address,\r\n      componentRestrictions: {}\r\n    }\r\n    this.acService.getPlacePredictions(config, function (predictions, status) {\r\n      //dontShowPredictions = false;\r\n      // console.log('modal > getPlacePredictions > status > ', status);\r\n      self.autocompleteItems = [];\r\n      if (status != 'ZERO_RESULTS' && predictions) {\r\n        self.dontShowPredictions = false;\r\n        predictions.forEach(function (prediction, abc) {\r\n          self.autocompleteItems.push(prediction);\r\n        });\r\n\r\n      }\r\n      else {\r\n        self.dontShowPredictions = true;\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n   chooseItem(item) {\r\n    var geocoder = new google.maps.Geocoder();\r\n    this.userDetails.address = item.description;\r\n    this.finalSearchValue = item.description;\r\n    this.dontShowPredictions = true;\r\n  }\r\n\r\n  dismiss() {\r\n    this.userDetails.address = '';\r\n    this.dontShowPredictions = true;\r\n  }\r\n\r\n\r\n}\r\n\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/profile-details/edit-profile/edit-profile.ts"],"sourceRoot":""}