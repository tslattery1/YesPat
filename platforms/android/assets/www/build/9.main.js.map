{"version":3,"sources":["../../src/pages/notification/notification.module.ts","../../src/pages/notification/notification.ts"],"names":[],"mappings":"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","file":"9.main.js","sourcesContent":["//home.module.ts\nimport { NgModule } from '@angular/core';\nimport {NotificationPage } from './notification';\nimport { IonicPageModule } from 'ionic-angular';\n\n@NgModule({\n  declarations: [NotificationPage],\n  imports: [IonicPageModule.forChild(NotificationPage)],\n})\nexport class NotificationPageModule { }\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notification/notification.module.ts","import { ToastController } from 'ionic-angular';\nimport { Component, EventEmitter } from '@angular/core';\nimport { Usergrid } from \"../../services/usergrid.service\";\nimport { Storage } from \"@ionic/storage\";\nimport { NavParams, NavController, AlertController } from 'ionic-angular';\nimport { IonicPage } from 'ionic-angular';\n\n// import { Push, PushObject, PushOptions } from '@ionic-native/push';\nimport { Http, Response, RequestOptions } from '@angular/http';\nimport 'rxjs/add/operator/map';\nimport { AngularFireDatabase, FirebaseListObservable } from \"angularfire2/database\";\nimport { PushNotification } from \"../../services/push-notification.service\";\nimport { OneSignal } from '@ionic-native/onesignal';\n\nimport firebase from 'firebase';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-notification',\n  templateUrl: 'notification.html'\n  /*  outputs: [`notifCountEvent`]*/\n})\n\nexport class NotificationPage {\n  notifData: boolean = true;\n  reject: boolean = false;\n  publishers: any = [];\n  notifCountEvent: any;\n  notifCount: number = 0;\n  username: string;\n  parkingSpots: any;\n  requesters: any = [];\n  spotDetails: any = [];\n  spotIds: any = [];\n  requestingUserData: any = [];\n  user: FirebaseListObservable<any>;\n  uid: any;\n  currentUser: any;\n\n  constructor(\n    private pushNotif: PushNotification,\n    private storage: Storage,\n    private navParams: NavParams,\n    private navController: NavController,\n    private alertCtrl: AlertController,\n\n    private _http: Http,\n    private af: AngularFireDatabase,\n    private oneSignal: OneSignal,\n    public toast: ToastController\n\n\n  ) {\n\n    this.storage.get('uid').then((uid) => {\n      this.uid = uid;\n      let userData = firebase.database().ref('/userProfile/');\n      userData.child(uid).once(\"value\", (snapshot) => {\n        // console.log('value', snapshot.val());\n        this.currentUser = snapshot.val();\n      })\n      //spot.publisherDetails.uid = response;\n      //let key = this.spots.push(spot).key;\n      this.user = this.af.list('/userProfile/' + uid + \"/parkingDetails/\");\n      this.user.subscribe((userParkingDetails) => {\n        // console.log('1111111 Change in parkingDetails==> ', this.spotIds, this.requestingUserData);\n        if (userParkingDetails.length) {\n          for (let i = 0; i < userParkingDetails.length; i++) {\n            this.spotIds[i] = userParkingDetails[i].$value;\n            //console.log(this.spotIds[i]);\n\n            let userData = firebase.database().ref('/spots/' + this.spotIds[i] + '/requesterDetails/');\n            userData.once(\"value\", (snapshot) => {\n              // console.log('initial each', snapshot.val());\n              if (snapshot.val() != null) {\n                Object.keys(snapshot.val()).forEach((key) => {\n                  let primaryKey = key;\n                  var value = snapshot.val()[key];\n                  console.log('primaryKey ', primaryKey);\n                  Object.keys(value).forEach((key) => {\n                    let secondaryKey = key;\n                    console.log('secondaryKey ', secondaryKey);\n                    let getData = firebase.database().ref('/spots/' + this.spotIds[i] + '/requesterDetails/' + primaryKey);\n                    getData.child(secondaryKey).once(\"value\", (snapshot) => {\n                      console.log('each', snapshot.val());\n                      if (snapshot.val().status == 'Pending') {\n                        let data = snapshot.val();\n                        data.mykey = secondaryKey;\n                        data.spotId = this.spotIds[i];\n                        this.requestingUserData.push(data);\n                      }\n                    })\n                  });\n                });\n                // let key = Object.keys(snapshot.val());\n                // console.log('earch', key);\n              }\n              // console.log('snapshot', snapshot.val());\n\n            })\n\n            // this.af.list('/spots/' + this.spotIds[i] + '/requesterDetails/')\n            //   .subscribe((requesterDetails) => {\n            //     console.log('1111111 Change in requesterDetails==> ', requesterDetails);\n            // if (requesterDetails.length) {\n\n            //   for (let j = 0; j < requesterDetails.length; j++) {\n\n            //     let k = 0;\n            //     while (Object.keys(requesterDetails[j])[k] != undefined) {\n            //       var firstKey = Object.keys(requesterDetails[j])[k];\n            //       if (requesterDetails[j][firstKey].status == 'Pending') {\n            //         console.log('each', requesterDetails[j][firstKey]);\n            //         this.notifData = true;\n            //         requesterDetails[j][firstKey].mykey = firstKey;\n            //         requesterDetails[j][firstKey].spotId = this.spotIds[i];\n            //         this.requestingUserData.push(requesterDetails[j][firstKey]);\n            //       }\n\n\n            //       k++;\n\n            //     }\n\n            //   }\n            //   console.log('Data', this.requestingUserData);\n            //   if (this.requestingUserData.length == 0) {\n            //     this.notifData = false;\n\n            //   }\n            //   else {\n            //     this.notifData = true;\n\n            //   }\n            // }\n\n\n            // })\n          }\n\n\n        }\n        else {\n          this.notifData = false;\n        }\n\n\n        //console.log(this.spotDetails);\n\n      })\n\n\n      // this.navCtrl.push('HistoryPage');\n\n    })\n\n  }\n\n\n\n  acceptRequest(requester, index) {\n    console.log('Requester', requester);\n    let userData = firebase.database().ref('/spots/' + requester.spotId + '/publisherDetails/');\n    userData.once(\"value\", (snapshot) => {\n      console.log('snapshot.val()', snapshot.val());\n      if (snapshot.val() && snapshot.val().status) {\n        let options: any = {\n          message: 'You can not accept this parking as you has already accepted this location parking for another user.',\n          duration: 2000,\n          position: 'top'\n        }\n        let toast = this.toast.create(options);\n        toast.present();\n      } else {\n        //this.requestingUserData.splice(index,index+1);\n\n        //spot.publisherDetails.uid = response;\n        //let key = this.spots.push(spot).key;\n        this.user = this.af.list('/userProfile/' + this.uid + \"/parkingDetails/\");\n        this.user.subscribe((userParkingDetails) => {\n          for (let i = 0; i < userParkingDetails.length; i++) {\n            this.spotIds[i] = userParkingDetails[i].$value;\n            //console.log(this.spotIds[i]);\n\n            this.af.list('/spots/' + this.spotIds[i] + '/requesterDetails/')\n              .subscribe((requesterDetails) => {\n                if (requesterDetails.length) {\n                  for (let j = 0; j < requesterDetails.length; j++) {\n                    let k = 0;\n                    while (Object.keys(requesterDetails[j])[k] != undefined) {\n                      var firstKey = Object.keys(requesterDetails[j])[k];\n                      if (requesterDetails[j][firstKey].uid == requester.uid && firstKey == requester.mykey) {\n                        this.af.object('/spots/' + this.spotIds[i] + '/requesterDetails/' + requester.uid + '/' + firstKey).update({ status: 'Accepted' })\n                          .then((response) => {\n                            // console.log(\"all good bruh\");\n                            this.af.object('/spots/' + this.spotIds[i] + '/publisherDetails/').update({ status: 'Accepted' })\n                              .then((response) => {\n                                console.log(\"all good bruh\");\n                              })\n                            let options: any = {\n                              message: requester.name + ' Parking aceepted successfully.',\n                              duration: 2000,\n                              position: 'top'\n                            }\n                            console.log('ToastOptions', options);\n                            let toast = this.toast.create(options);\n                            toast.present();\n                            this.navController.setRoot('PostFindspotPage');\n\n                            var notificationObj = {\n                              \"app_id\": \"4a1163d9-1d7a-42d0-86f0-bc85a9621a3c\",\n                              headings: { \"en\": 'Parking Accepted' },\n                              \"contents\": { \"en\": this.currentUser.name + ' has Accepted your spot request.' },\n                              data: { Root: true, DirectNavigatePage: 'HistoryPage', rootParams: 'Requested' },\n                              include_player_ids: [requester.playerId]\n                            };\n\n                            console.log('Hello One Signal object', notificationObj);\n\n                            window[\"plugins\"].OneSignal.postNotification(notificationObj,\n                              function (successResponse) {\n                                // alert(successResponse);\n                              },\n                              function (failedResponse) {\n                                //  console.log(\"Notification Post Failed: \", failedResponse);\n                                // alert(\"Notification Post Failed:\\n\" + JSON.stringify(failedResponse));\n                              }\n                            );\n\n                          })\n                          .catch(error => {\n                            let options: any = {\n                              message: 'Something went wrong.',\n                              duration: 2000,\n                              position: 'top'\n                            }\n                            let toast = this.toast.create(options);\n                            toast.present();\n                          });\n                        // let message = {\n                        //   \"username\": requester.name,\n                        //   \"registrationId\": requester.registrationId,\n                        //   \"type\": \"acceptRequest\"\n                        // }\n                        // this.pushNotif.sendPush(message).subscribe((response) => {\n                        //   //alert(JSON.stringify(response));\n                        // },\n                        //   (error) => {\n                        //     // alert(error);\n                        //   })\n\n                      }\n\n                      k++;\n\n                    }\n\n                  }\n                }\n\n              })\n          }\n\n        })\n        this.requestingUserData.splice(index, index + 1);\n\n      }\n    })\n\n    // let myAlert = this.alertCtrl.create({\n    //   title: 'You accepted the parking request of ',\n    //   subTitle: requester.name,\n    //   buttons: ['OK']\n    // });\n\n    // myAlert.present();\n\n\n  }\n\n\n  rejectRequest(requester, i) {\n\n    this.af.object('/spots/' + requester.spotId + '/requesterDetails/' + requester.uid + '/' + requester.mykey).update({ status: 'Rejected' }).then((response) => {\n      console.log(\"response\");\n      //this.requestingUserData.splice(i,i+1);\n      let options: any = {\n        message: requester.name + ' Parking Rejected successfully.',\n        duration: 2000,\n        position: 'top'\n      }\n      let toast = this.toast.create(options);\n      toast.present();\n      // this.navController.setRoot('PostFindspotPage');\n    })\n\n    // this.requestingUserData.splice(i, i + 1);\n\n    // let alert = this.alertCtrl.create({\n    //   title: 'You rejected the parking request of ',\n    //   subTitle: requester.name,\n    //   buttons: ['OK']\n    // });\n    // alert.present();\n    var notificationObj = {\n      \"app_id\": \"4a1163d9-1d7a-42d0-86f0-bc85a9621a3c\",\n      headings: { \"en\": 'Parking Rejected' },\n      \"contents\": { \"en\": this.currentUser.name + ' has rejected your spot request.' },\n      data: { Root: true, DirectNavigatePage: 'HistoryPage', rootParams: 'Requested' },\n      include_player_ids: [requester.playerId]\n    };\n\n    console.log('Hello One Signal object', notificationObj);\n\n    window[\"plugins\"].OneSignal.postNotification(notificationObj,\n      function (successResponse) {\n        // alert(successResponse);\n      },\n      function (failedResponse) {\n        //  console.log(\"Notification Post Failed: \", failedResponse);\n        // alert(\"Notification Post Failed:\\n\" + JSON.stringify(failedResponse));\n      }\n    );\n    this.navController.setRoot('PostFindspotPage');\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/notification/notification.ts"],"sourceRoot":""}